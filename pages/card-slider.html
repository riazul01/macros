<!DOCTYPE html>
<!-- 
    Project name: Card Slider
    Author: Md. Riazul Islam
    Author URI: https://github.com/riazul01
-------------------------------------------->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: monospace;
        }

        .container {
            padding: 3rem 0;
            height: auto;
            min-height: 100vh;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .cards {
            margin: 0 0.4rem;
            position: relative;
            width: 100%;
            height: auto;
            max-width: 600px;
            min-height: 600px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 3rem;
            place-items: center;
        }

        .card {
            position: absolute;
            height: 420px;
            width: 320px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 1rem;
            transition: all 0.4s ease;
        }

        .card:nth-child(1) {
            background: #000;
        }

        .card:nth-child(2) {
            background: #111;
        }

        .card:nth-child(3) {
            background: #222;
        }

        .card:nth-child(4) {
            background: #333;
        }

        .card:nth-child(5) {
            background: #444;
        }

        .card > h1 {
            position: absolute;
            top: 2rem;
            left: 2rem;
            color: skyblue;
            font-size: 1.8rem;
        }

        .card > p {
            color: #fff;
            font-size: 1.3rem;
        }

        @media screen and (max-width: 1080px) {
            .cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media screen and (max-width: 760px) {
            .cards {
                grid-template-columns: repeat(1, 1fr);
            }
        }

        @media screen and (max-width: 340px) {
            .card {
                width: 100%;
            }
        }
    </style>

    <title>Card Slider</title>
</head>

<body>
    <div class="container">
        <div class="cards">
            <div class="card">
                <h1>05</h1>
                <p>Hover Me!</p>
            </div>

            <div class="card">
                <h1>04</h1>
                <p>Hover Me!</p>
            </div>

            <div class="card">
                <h1>03</h1>
                <p>Hover Me!</p>
            </div>

            <div class="card">
                <h1>02</h1>
                <p>Hover Me!</p>
            </div>

            <div class="card">
                <h1>01</h1>
                <p>Hover Me!</p>
            </div>
        </div>
    </div>

    <script>
        (function() {
            const cardsWrap = document.querySelector('.cards');
            const cardText = document.querySelectorAll('.card > p');
            const cards = document.querySelectorAll('.card');
            const transforms = ['70%', '60%', '50%', '40%', '30%'];
            let cardIntervalId = null;
            let spreadMode = false;

            // card styles in diffrent mode
            const handleCardStyles = (mode) => {
                if (mode === 'spread') {
                    clearInterval(cardIntervalId);
                    cardsWrap.style.maxWidth = '1040px';
                    for (let i = 0; i < cards.length; i++) {
                        cards[i].style.position = 'relative';
                        cards[i].style.top = 'initial';
                        cards[i].style.left = 'initial';
                        cards[i].style.transform = 'none';
                        cards[i].onmouseover = () => null;
                        cards[i].onmouseout = () => null;
                        cardText[i].innerText = 'Click Me!';
                    }
                } else if (mode === 'stack') {
                    cardsWrap.style.maxWidth = '600px';
                    clearInterval(cardIntervalId);
                    for (let i = 0; i < cards.length; i++) {
                        cards[i].style.position = 'absolute';
                        cards[i].style.top = '50%';
                        cards[i].style.left = '50%';
                        cards[i].style.transform = 'translate(-50%, -50%)';
                        cardText[i].innerText = 'Click Me!';
                    }
                } else if (mode === 'automate') {
                    cardsWrap.style.maxWidth = '600px';
                    for (let i = 0; i < cards.length; i ++) {
                        cards[i].style.position = 'absolute';
                        cards[i].style.top = transforms[i];
                        cards[i].style.left = transforms[i];
                        cards[i].style.transform = `translate(-${transforms[i]}, -${transforms[i]})`;
                        cards[i].style.zIndex = 10 - transforms[i][0];
                        cardText[i].innerText = 'Hover Me!';
                    }
                }
            }
            
            const automatecards = () => {
                cardIntervalId = setInterval(() => {
                    // swap ternsform styles
                    let temp = transforms[0];
                    for (let i = 0; i < transforms.length - 1; i ++) {
                        transforms[i] = transforms[i + 1];
                    }
                    transforms[transforms.length - 1] = temp;
                    
                    // apply ternsform styles
                    handleCardStyles('automate');
                }, 1000);
            }
            
            const mouseOverAndOutEffect = () => {
                for (let i = 0; i < cards.length; i ++) {
                    cards[i].onmouseover = () => {
                        handleCardStyles('stack');
                    }
                
                    cards[i].onmouseout = () => {
                        automatecards();
                    }
                }
            }
            
            const cardClickEffect = () => {
                for (let i = 0; i < cards.length; i++) {
                    cards[i].onclick = () => {
                        if (!spreadMode) {
                            handleCardStyles('spread');
                            spreadMode = true;
                        } else {
                            handleCardStyles('stack');
                            mouseOverAndOutEffect();
                            spreadMode = false;
                        }
                    }
                }
            }
            
            automatecards();
            mouseOverAndOutEffect();
            cardClickEffect();
        })();
    </script>
</body>

</html>